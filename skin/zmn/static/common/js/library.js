!function(){window.zmn={},zmn.formReg=function(e,t,n,s){if(t.length<=0)return!1;var a=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+\.([a-zA-Z0-9_-]){2,3}/,r=/^(13[0-9]{9})|(15[0-9]{9})|(18[0-9]{9})|(177[0-9]{8})|(147[0-9]{8})$/,l=/^[1-9][0-9]{5}$/,o={zmn_name:"请填写用户名！",zmn_tel:"请填写电话！",zmn_book:"请填写书名！",zmn_code:"请填写邮编！",zmn_email:"请填写邮箱！"},c="";for(i=0;i<t.length;i++){if(c=$("#"+t[i]).val(),!$.trim(c))return alert(o[t[i]]),!1;if(!a.test(c)&&"zmn_email"==t[i])return alert("请填写正确的电子邮箱！"),!1;if(!r.test(c)&&"zmn_tel"==t[i])return alert("请填写正确的手机号码！"),!1;if(!l.test(c)&&"zmn_code"==t[i])return alert("请填写正确的邮政编码！"),!1}var d=new Date;$("#zmn_time").val(d),"blur"!=n&&($(e).submit(),s||s())},zmn.rollBoxY=function(e,t){function n(){var n=parseFloat(a.css("top")),s=i(t.way);clearInterval(t.rollBoxTimer1),t.rollBoxTimer1=setInterval(function(){a.animate({top:s},t.speed,function(){var l=a.children().size();if(n=parseFloat(a.css("top")),"bottom"==t.way&&n>=e.height()-r){var o=a.children().slice(l/2,l);a.prepend(o).css("top",n-r)}else if("top"==t.way&&-r>=n){var o=a.children().slice(0,l/2);a.append(o).css("top",0)}s=i(t.way)})},t.timer)}function i(e){var n=a.children().innerHeight(),i=parseFloat(a.css("top"));return"bottom"==e?i+n*t.line:i-n*t.line}var e=$(e),t={speed:t.speed||500,line:t.line||2,timer:t.timer||3e3,way:t.way||"top"};if(e.children().size()<=t.line)return!1;var s=$(e.html());e.children().wrapAll("<div class='box_wp' style='position:relative;'></div>");var a=$(".box_wp",e).append(s),r=a.height()/2;"bottom"==t.way?a.css("top",-r):a.css("top",0),n(),e.hover(function(){clearInterval(t.rollBoxTimer1)},function(){n()})},zmn.rollBoxX=function(e,t,n,i,s){function a(t){var n=parseFloat(v.css("left"));clearInterval(e.rollBoxTimer2),e.rollBoxTimer2=setInterval(function(){g=l(t),v.animate({left:g},200,function(){if(n=parseFloat(v.css("left")),"left"==t&&-m>=n){var i=v.children().slice(0,h);v.prepend(i).css("left",n+m)}else if("right"==t&&n>=e.width()-m){var i=v.children().slice(h,2*h);v.append(i).css("left",n-m)}})},3e3),e.hover(function(){clearInterval(e.rollBoxTimer2)},function(){a("right")}),$(".rollleft,.rollright").hover(function(){clearInterval(e.rollBoxTimer2)},function(){a("right")})}function r(t,i){var s=parseInt(t.attr("djcs")),a=null;g=l(i),s&&0!=s||(t.attr("djcs","1"),v.animate({left:g},200,function(){nowLeft=parseFloat(v.css("left")),1==n&&e.attr("index",Math.abs(nowLeft/o)%h),"left"==i&&-m>=nowLeft?(a=v.children().slice(0,h),v.prepend(a).css("left",nowLeft+m)):"right"==i&&nowLeft>=e.width()-m&&(a=v.children().slice(h,2*h),v.append(a).css("left",nowLeft-m)),t.attr("djcs","0")}))}function l(e){var t=parseFloat(v.css("left"));return"left"==e?t-(o+p)*n:t+(o+p)*n}var e=e,t=e.find(t),o=t.innerWidth(),c=e.innerWidth(),d=e.innerHeight(),f=parseInt(c/o),p=s||c%o/f,h=t.size();if(t.css({"margin-right":p}),t.size()<=f)return!1;var u=$(e.html());e.children().wrapAll("<div class='box_wp' style='position:relative;'></div>"),e.after("<a class='rollleft' href='javascript:;' target='_self'></a><a class='rollright' href='javascript:;' target='_self'></a>");var v=$(".box_wp",e).append(u),m=(o+p)*h,g=0;v.css({width:2*m,height:d,left:-m}),i&&a("right"),$(".rollleft").bind("click",function(){var e=$(this);r(e,"left")}),$(".rollright").bind("click",function(){var e=$(this);r(e,"right")})},zmn.rollText=function(e,t,n){function i(){clearInterval(e.rollTxtTimer1);var i=0;e.rollTxtTimer1=setInterval(function(){if(i=parseFloat(a.css("top")),"bottom"==n&&i>=e.height()-s){var r=a.children().slice(1);return a.prepend(r).css("top",i-s),!1}if("top"==n&&-s>=i){var r=a.children().slice(0).attr("a","s");return a.append(r).css("top",0),!1}"bottom"==n?a.css("top",i+t):a.css("top",i-t)},30)}var e=$(e);e.children().wrapAll("<div class='txt_bx'></div>");var s=$(".txt_bx",e).height();if($(".txt_bx",e).height()<e.height())return!1;e.append(e.html()).children().wrapAll("<div class='txt_wp' style='position:relative;'></div>");var a=$(".txt_wp",e);"bottom"==n&&a.css("top",-s),i(),e.hover(function(){clearInterval(e.rollTxtTimer1)},function(){i()})},zmn.showPic=function(e,t){var e=$(e),t=$(t);t.css({"z-index":10,opacity:0}).eq(0).css({"z-index":11,opacity:1}),e.append("<div class='dian'></div><a class='dian_arr1' href='javascript:;' target='_self'></a><a class='dian_arr2' href='javascript:;' target='_self'></a>");var n=$(".dian",e);t.each(function(){var e=$(this).index();n.append($(0==e?"<span class='dsel'></span>":"<span></span>"))}),n.find("span").bind("click mouseover",function(){var e=$(this).index(),i=n.find("span").index($(".dsel",n));return e==i?!1:($(this).addClass("dsel").siblings("span").removeClass("dsel"),t.eq(i).css("z-index",10),t.eq(e).css("z-index",11),t.eq(i).animate({opacity:0},1e3),void t.eq(e).animate({opacity:1},1e3))}),$(".dian_arr1",e).bind("click",function(){e.num=n.find("span").index($(".dsel",e)),e.num--,e.num<0&&(e.num=n.find("span").size()-1),n.find("span").eq(e.num).click()}),$(".dian_arr2",e).bind("click",function(){e.num=n.find("span").index($(".dsel",e)),e.num++,e.num>=n.find("span").size()&&(e.num=0),n.find("span").eq(e.num).click()}),e.showpicInt=null,e.hover(function(){clearInterval(e.showpicInt)},function(){e.showpicInt=setInterval(function(){e.num=n.find("span").index($(".dsel",e)),e.num++,e.num>=n.find("span").size()&&(e.num=0),n.find("span").eq(e.num).click()},5e3)}).mouseout()},zmn.setCalendar=function(e,t){function n(e,n,r){{var l="",o=s(e,n,1),c=s(e,n,a(e,n)),d=n>1?n-1:12,f=n>1?e:e-1;a(f,d)}for(i=0;o-1>=i;i++)l+="<li></li>";var p="";for(j=1;j<=a(e,n);j++)p=0,t[j]&&(1==t[j].state?p="stateDay1":2==t[j].state?p="stateDay2":3==t[j].state&&(p="stateDay3")),l=j==r?l+"<li class='day "+p+"' style='color:red;' day='"+j+"' state='"+p+"'>"+j+"</li>":l+"<li class='day "+p+"' day='"+j+"' state='"+p+"'>"+j+"</li>";for(k=1;6-c>=k;k++)l+="<li></li>";return l}function s(e,t,n){var i=new Date(e+"/"+t+"/"+n);return i.getDay()}function a(e,t){var n=new Date(e,t,0);return n.getDate()}var e=$(e),r=new Date,l=r.getFullYear(),o=r.getMonth()+1,c=r.getDate(),d="";switch(o){case 1:d="<strong>1/</strong>January";break;case 2:d="<strong>2/</strong>February";break;case 3:d="<strong>3/</strong>March";break;case 4:d="<strong>4/</strong>April";break;case 5:d="<strong>5>/</strongMay";break;case 6:d="<strong>6/</strong>June";break;case 7:d="<strong>7/</strong>July";break;case 8:d="<strong>8/</strong>August";break;case 9:d="<strong>9/</strong>September ";break;case 10:d="<strong>10/</strong>October ";break;case 11:d="<strong>11/</strong>November";break;case 12:d="<strong>12/</strong>December"}var f="<div class='calendar_top'>"+d+"</div>",p="<ul class='weekbox fc'><li>Sun</li><li>Mon</li><li>Tue</li><li>Wed</li><li>Thu</li><li>Fri</li><li>Sat</li></ul>",h="<ul class='datelist fc'>"+n(l,o,c)+"</ul>";e.append(f).append(p).append(h),$(".datelist li").slice(0,7).css("z-index","10"),$(".datelist li").slice(7,14).css("z-index","9"),$(".datelist li").slice(14,21).css("z-index","8"),$(".datelist li").slice(21,28).css("z-index","7"),$(".datelist li").slice(28,35).css("z-index","6"),$(".stateDay1,.stateDay2,.stateDay3",e).hover(function(){var e=(parseInt($(".datelist li").index($(this)))+1)%7,n=$(this).attr("day"),i=$(this).attr("state");$(this).addClass(i+"_hover"),$(this).html(t[n].typeName),1==e?$(this).append("<span style='left:0;'>"+t[n].info+"</span>"):2==e?$(this).append("<span style='left:0;'>"+t[n].info+"</span>"):3==e?$(this).append("<span style='left:0;'>"+t[n].info+"</span>"):4==e?$(this).append("<span style='left:0;'>"+t[n].info+"</span>"):5==e?$(this).append("<span style='right:0;'>"+t[n].info+"</span>"):6==e?$(this).append("<span style='right:0;'>"+t[n].info+"</span>"):0==e&&$(this).append("<span style='right:0;'>"+t[n].info+"</span>")},function(){var e=$(this).attr("day"),t=$(this).attr("state");$(this).removeClass(t+"_hover"),$(this).find("span").remove(),$(this).html(e)})},zmn.setByc=function(e,t,n){var e=e,t=e.find(t),n=e.find(n);n.eq(0).show(),t.bind("click",function(){var e=t.index($(this));t.removeClass("hover"),$(this).addClass("hover"),n.eq(e).is(":hidden")&&(n.slideUp(),n.eq(e).slideDown())})}}(),function(e){e.fn.extend({ontabs:function(t,n,i,s,a){return this.each(function(){function r(s,r){"animate"==a&&(l=e(s).width()+parseInt(e(s).css("padding-left"))+parseInt(e(s).css("padding-right"))+parseInt(e(s).css("border-right-width"))+parseInt(e(s).css("border-left-width")),o=e(s).offset().left-parseInt(e(s).parent().offset().left),e(s).siblings("em").animate({left:o,width:l},200)),c.find(t).removeClass(i).eq(r).addClass(i),c.find(n).hide().eq(r).show()}var l,o,c=e(this),d=c.attr("sj")||s||"mouseover",f=c.find(t).filter("."+i),p=0,h=[];c.attr("sj",d),f.length>0&&(p=c.find(t).index(f),c.find(n).hide().eq(p).show(),r(c.find(t).eq(p),p)),"mouseover"==d?c.find(t).hover(function(){var t=e(this),n=t.index();h[n]=setTimeout(function(){r(t,n)},200)},function(){var t=e(this).index();clearTimeout(h[t])}):c.find(t).bind(d,function(){var t=e(this),n=t.index();r(t,n)})})}})}(jQuery);